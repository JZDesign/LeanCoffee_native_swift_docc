{"variants":[{"paths":["\/tutorials\/leancoffeeapp\/presenter"],"traits":[{"interfaceLanguage":"swift"}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In this chapter weâ€™ll refactor the Sign in and Sign up views to use the Presenter pattern. This will allow us to reuse some of the code, and pull the business logic out of the view."}]}],"estimatedTimeInMinutes":35,"title":"The Presenter Pattern","image":"coffee-beans.png","chapter":"The Presenter Pattern","kind":"hero","backgroundImage":"coffee-beans.png"},{"kind":"tasks","tasks":[{"anchor":"A-basic-Presenter","title":"A basic Presenter","contentSection":[{"kind":"contentAndMedia","content":[{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When should the view be in a loading state?"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Are there any meaningful errors to display?"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When should a new view be presented?"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"These are several common questions that nearly every view will have that a presenter could answer. We can create a generic presenter to manage this core functionality and threading so that other, more specific presenters, can inherit from the generic one."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For more information on presenters, you can read "},{"type":"reference","isActive":true,"identifier":"https:\/\/www.baeldung.com\/mvc-vs-mvp-pattern"},{"type":"text","text":"."}]}],"mediaPosition":"trailing","media":"swift.png"}],"stepsSection":[{"code":"Presenter.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"To get started weâ€™re going to create a new file named "},{"type":"codeVoice","code":"Presenter.swift"},{"type":"text","text":". In it, weâ€™re going to create a view for us to build the presenter with."}]}],"caption":[],"type":"step","runtimePreview":"presenterview.png","media":null},{"code":"Presenter1.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Ideally, this view will allow us to trigger some events that will modify the presenter state so that we can see how to use a presenter. So weâ€™ll modify this view a bit to have some buttons."}]}],"caption":[],"type":"step","runtimePreview":"presenterview1.png","media":null},{"code":"Presenter2.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"With this in place, letâ€™s create our presenter. This will be a "},{"type":"codeVoice","code":"class"},{"type":"text","text":" instead of a "},{"type":"codeVoice","code":"struct"},{"type":"text","text":" for a couple of reasons. First, we want to be able to pass a reference of it around so we can observe it from the view. Second, structs cannot be inherited from, but classes can be, and we have plans for that."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This class will adhere to the "},{"type":"codeVoice","code":"ObservableObject"},{"type":"text","text":" protocol, which will allow us to use this to publish events to a SwiftUI view. Additionally, weâ€™re wrapping this class in the "},{"type":"codeVoice","code":"MainActor"},{"type":"text","text":" which helps to protect against app crashes caused by modifying view state from a background thread. For more detail on that, checkout this awesome "},{"type":"reference","isActive":true,"identifier":"https:\/\/www.swiftbysundell.com\/articles\/the-main-actor-attribute\/"}]}],"type":"step","runtimePreview":null,"media":null},{"code":"Presenter3.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The presenter will hold 4 variables. The boolean values are what will trigger events in the view, and the optional error value will be for more information in the view (or inheriting presenter) if it cares to know what the error was."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"@Published"},{"type":"text","text":" property wrapper tells the Swift compiler that these variables can update the view state or be subscribed to in other structs and classes. You can read more about that in "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/combine"},{"type":"text","text":" on Publishers and Subscribers."}]}],"type":"step","runtimePreview":null,"media":null},{"code":"Presenter4.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Next up, we need to create the function that will do all the magic. Weâ€™ll call the function "},{"type":"codeVoice","code":"perform"},{"type":"text","text":" and weâ€™ll make it internal to the class, which means that any inheritor can use it, but otherwise itâ€™s private."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The only argument this function will take is another function weâ€™ll name "},{"type":"codeVoice","code":"task"},{"type":"text","text":". Task will take no arguments and it could potentially throw or be asynchronous. Because "},{"type":"codeVoice","code":"perform"},{"type":"text","text":" will execute task which is potentially asynchronous, we also need to define "},{"type":"codeVoice","code":"perform"},{"type":"text","text":" as "},{"type":"codeVoice","code":"async"}]}],"type":"step","runtimePreview":null,"media":null},{"code":"Presenter5.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Performâ€™s function body will start off by telling the view that work is being done, and it should show a loading state. Immediately after that, weâ€™re going to execute the "},{"type":"codeVoice","code":"task"},{"type":"text","text":", catching any errors and storing them if they arise. Finally when the work is done, we need to tell the view to stop loading. "},{"type":"emphasis","inlineContent":[{"type":"text","text":"Note that weâ€™re not explicitly storing "},{"type":"codeVoice","code":"didFinish = true"},{"type":"text","text":" here. We want to allow the caller to specify when the work is truly finished."}]}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Sweet! Now lets see how it works."}]}],"type":"step","runtimePreview":null,"media":null},{"code":"Presenter6.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Weâ€™ll create a "},{"type":"codeVoice","code":"MockPresenter"},{"type":"text","text":" that inherits from Presenter and add a function to the new presenter named "},{"type":"codeVoice","code":"load"},{"type":"text","text":". This function will call perform and will simply wait for 2 seconds."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"Presenter7.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Now we can observe the "},{"type":"codeVoice","code":"MockPresenter"},{"type":"text","text":" from our view using the "},{"type":"codeVoice","code":"@ObservedObject"},{"type":"text","text":" property wrapper. Then weâ€™ll modify the top button text to display differently if the presenter is loading, and call the load function when the button is tapped."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Looks good! Next, weâ€™ll present a new screen."}]}],"type":"step","runtimePreview":"presenterview2.png","media":null},{"code":"Presenter8.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"To present a new screen, weâ€™re simply going to tell the presenter itâ€™s finished after loading is complete, and tell the view to observe that value in the sheet method."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Nice and simple. Now onto error handling."}]}],"type":"step","runtimePreview":"presenterview3.png","media":null},{"code":"Presenter9.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Again, this is going to be pretty straight forward. In our "},{"type":"codeVoice","code":"MockPresenter"},{"type":"text","text":" weâ€™re going to write a function named "},{"type":"codeVoice","code":"throw"},{"type":"text","text":". Because the word throw is a keyword in swift, itâ€™s â€œprotected.â€ In order to use it here, we need to wrap it in backticks. Inside of that function, weâ€™ll call perform like we did in load, and weâ€™ll simulate an error by throwing a generic one."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Then in the view, much like we used the "},{"type":"codeVoice","code":"sheet"},{"type":"text","text":" function, we can present an alert with the "},{"type":"codeVoice","code":"alert"},{"type":"text","text":" function. For now, we donâ€™t need any special actions or text. So weâ€™ll keep it plain and simple."}]}],"type":"step","runtimePreview":"presenterview4.png","media":null}]},{"anchor":"The-Sign-In-Presenter","title":"The Sign In Presenter","contentSection":[{"kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"With the Presenter made, we can now refactor the "},{"type":"codeVoice","code":"SignInView"},{"type":"text","text":" and "},{"type":"codeVoice","code":"SignUpView"},{"type":"text","text":" to use the pattern."}]}],"mediaPosition":"trailing","media":"swift.png"}],"stepsSection":[{"code":"SignInView7-3.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Letâ€™s pick up where we left off. The sign in view has a familiar variable, "},{"type":"codeVoice","code":"didFinish"},{"type":"text","text":" and a function that feels pretty similar to what the "},{"type":"codeVoice","code":"perform"},{"type":"text","text":" function does in the "},{"type":"codeVoice","code":"Presenter"}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"These similarities are a perfect reason for abstraction."}]}],"type":"step","runtimePreview":null,"media":null},{"code":"SignInPresenter1.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a new file called "},{"type":"codeVoice","code":"SignInPresenter.swift"},{"type":"text","text":" and add the username, password, and access token variables to it."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"SignInPresenter2.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Afterwards, weâ€™re going to start copying and pasting some code from the view. We need to create the authorization header. Letâ€™s add that to a function called "},{"type":"codeVoice","code":"submitForm"}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"SignInPresenter3.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Then weâ€™ll move the code that fetches the access token from the view into the presenter. Because itâ€™s in a function that is asynchronous already, we donâ€™t need the "},{"type":"codeVoice","code":"Task"},{"type":"text","text":" block."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"But that pretty much does it for the sign in presenter."}]}],"type":"step","runtimePreview":null,"media":null},{"code":"SignInView7-3.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Now letâ€™s go back to the sign in view. We have some cleanup to do."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"SignInView8-1.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Weâ€™ll no longer need the "},{"type":"codeVoice","code":"@State"},{"type":"text","text":" variables we have up top, so weâ€™ll remove them and replace them with the "},{"type":"codeVoice","code":"@ObservedObject"},{"type":"text","text":" sign in presenter."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Xcode will throw up some red errors, weâ€™ll clean those up next."}]}],"type":"step","runtimePreview":null,"media":null},{"code":"SignInView8-2.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Now, lets replace the body of the sign in function with the call to the presenterâ€™s submit form function."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"SignInView8-3.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Finally, weâ€™ll replace the references to the "},{"type":"codeVoice","code":"@State"},{"type":"text","text":" variables to the presenterâ€™s published variables. The viewâ€™s functionality hasnâ€™t changed, but none of that logic lives in the view directly."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Now, before we tackle the sign up view, letâ€™s go take a look at it."}]}],"type":"step","runtimePreview":null,"media":null},{"code":"SignUpView3-4-signin.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The sign up view has a lot in common with the sign in view. It has fields for the username and password, and it needs to make the same request that the sign in view does to authenticate the new user. For these reasons, the sign up presenter weâ€™ll create will inherit from the sign in presenter we just finished."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"SignUpPresenter1.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a new file named "},{"type":"codeVoice","code":"SignUpPresenter"},{"type":"text","text":". In it, create the class inheriting from the "},{"type":"codeVoice","code":"SignInPresenter"},{"type":"text","text":" add the 2 fields that it still needs."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"SignUpPresenter2.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Then, we can add the function to validate the password and confirm password fields match so the view doesnâ€™t have to."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"SignUpPresenter3.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"For the form submission, weâ€™ll override the "},{"type":"codeVoice","code":"submitForm"},{"type":"text","text":" function, replacing the body of the function with the request to create a user."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"You may be asking - â€œWait, doesnâ€™t overriding this not let us reuse the sign in request?â€ Good question."}]}],"type":"step","runtimePreview":null,"media":null},{"code":"SignUpPresenter4.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Nope! We can still call the super method below, which is what weâ€™ll do."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This wraps up the sign up presenter, letâ€™s go fix the view."}]}],"type":"step","runtimePreview":null,"media":null},{"code":"SignUpView3-4-signin.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Thereâ€™s a lot in this view ðŸ˜¬"}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Letâ€™s start cleaning up."}]}],"type":"step","runtimePreview":null,"media":null},{"code":"SignUpView4-1.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Again, weâ€™ll start by deleting the variables up top and replacing them with the presenter."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"SignUpView4-2.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Then weâ€™ll replace the body of the sign up function to call the submit form method on the presenter."}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"SignUpView4-3.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"And finally, weâ€™ll reference the presenter for all of the variables. That is much better."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"There are a couple of things that are still bugging me. We arenâ€™t displaying any loading or error states. In the next chapter weâ€™ll address those issues."}]}],"type":"step","runtimePreview":null,"media":null}]}]},{"action":{"overridingTitleInlineContent":[{"type":"text","text":"Get started"}],"isActive":true,"type":"reference","identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Loading-and-Errors","overridingTitle":"Get started"},"featuredEyebrow":"Tutorial","kind":"callToAction","title":"Loading and Errors","abstract":[{"type":"text","text":"Thereâ€™s nothing worse than an app that doesnâ€™t show loading states or errorsâ€¦"}]}],"identifier":{"url":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Presenter","interfaceLanguage":"swift"},"kind":"project","metadata":{"title":"The Presenter Pattern","categoryPathComponent":"Tutorial-Table-of-Contents","role":"project","category":"Lean Coffee - iOS"},"hierarchy":{"modules":[{"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/Getting-started-with-SwiftUI","projects":[{"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Getting-Started","sections":[{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Getting-Started#Your-first-SwiftUI-View"}]}]},{"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/Authentication","projects":[{"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Sign-in-and-Sign-up","sections":[{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Sign-in-and-Sign-up#Creating-the-Sign-in-View"},{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Sign-in-and-Sign-up#Creating-the-Sign-Up-View"}]}]},{"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/The-Presenter-Pattern","projects":[{"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Presenter","sections":[{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Presenter#A-basic-Presenter"},{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Presenter#The-Sign-In-Presenter"}]}]},{"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/Loading-and-Errors","projects":[{"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Loading-and-Errors","sections":[{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Loading-and-Errors#A-Loading-View"},{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Loading-and-Errors#The-AsyncView"}]}]},{"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/Lists-and-Dependencies","projects":[{"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/List-View","sections":[{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/List-View#A-laundry-list-of-things-to-do."},{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/List-View#Dependency-injection"}]}]},{"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/In-the-Topics","projects":[{"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Lean-Coffee-Topics","sections":[{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Lean-Coffee-Topics#Creating-the-Lean-Coffee-View"},{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Lean-Coffee-Topics#Creating-the-Lean-Coffee-Presenter"}]}]},{"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/Create-New-Events-and-Topics","projects":[{"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/New-Lean-Coffee-Events-and-Topics","sections":[{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/New-Lean-Coffee-Events-and-Topics#Form-Submissions"},{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/New-Lean-Coffee-Events-and-Topics#Creating-a-Lean-Coffee"},{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/New-Lean-Coffee-Events-and-Topics#Creating-a-Topic"},{"kind":"task","reference":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/New-Lean-Coffee-Events-and-Topics#You-did-it!-%F0%9F%94%A5%E2%98%9D%EF%B8%8F"}]}]}],"reference":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents","paths":[["doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents","doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/$volume","doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/The-Presenter-Pattern"]]},"references":{"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/Sign-in-and-Sign-up#Creating-the-Sign-in-View":{"role":"pseudoSymbol","title":"Creating the Sign in View","abstract":[{"type":"text","text":"Use the view from Chapter 1 to present a Sign in or Sign up form and log a user into the application."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Sign-in-and-Sign-up#Creating-the-Sign-in-View","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/sign-in-and-sign-up#Creating-the-Sign-in-View"},"Presenter8.swift":{"syntax":"swift","content":["import SwiftUI","","@MainActor class Presenter: ObservableObject {","    var error: Error?","    @Published var didError = false","    @Published var isLoading = false","    @Published var didFinish = false","    ","    internal func perform(_ task: () async throws -> Void) async {","        isLoading = true","        do {","            try await task()","        } catch {","            self.error = error","            didError = true","        }","        isLoading = false","    }","}","","class MockPresenter: Presenter {","    func load() {","        Task {","            await perform {","                try await Task.sleep(nanoseconds: 2_000_000_000)","                didFinish = true","            }","        }","    }","}","","struct PresenterView: View {","    @ObservedObject var presenter = MockPresenter()","    ","    var body: some View {","        VStack {","            Text(\"Presenter View\")","            Spacer()","            BoldButton(presenter.isLoading ? \"Loading ðŸ˜µâ€ðŸ’«\" : \"Present a new view\", backgroundColor: .purple, action: {","                presenter.load()","            })","            BoldButton(\"Throw an Error\", action: {})","        }","        .sheet(isPresented: $presenter.didFinish, content: { Text(\"It worked!\") })","    }","}","","struct PresenterView_Previews: PreviewProvider {","    static var previews: some View {","        PresenterView()","    }","}"],"fileName":"Presenter.swift","identifier":"Presenter8.swift","type":"file","fileType":"swift","highlights":[{"line":26},{"line":44}]},"doc://LeanCoffeeApp/tutorials/Tutorial-Table-of-Contents/The-Presenter-Pattern":{"role":"article","title":"The Presenter Pattern","abstract":[],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/The-Presenter-Pattern","kind":"article","type":"topic","url":"\/tutorials\/tutorial-table-of-contents\/the-presenter-pattern"},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/New-Lean-Coffee-Events-and-Topics#Form-Submissions":{"role":"pseudoSymbol","title":"Form Submissions","abstract":[{"type":"text","text":"In this chapter weâ€™ll finish implementing the applicationâ€™s core functionality by allowing the user to create Lean Coffee events and their topics."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/New-Lean-Coffee-Events-and-Topics#Form-Submissions","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/new-lean-coffee-events-and-topics#Form-Submissions"},"Presenter4.swift":{"syntax":"swift","content":["import SwiftUI","","@MainActor class Presenter: ObservableObject {","    var error: Error?","    @Published var didError = false","    @Published var isLoading = false","    @Published var didFinish = false","    ","    internal func perform(_ task: () async throws -> Void) async {","    ","    }","}","","struct PresenterView: View {","    var body: some View {","        VStack {","            Text(\"Presenter View\")","            Spacer()","            BoldButton(\"Present a new view\", backgroundColor: .purple, action: {})","            BoldButton(\"Throw an Error\", action: {})","        }","    }","}","","struct PresenterView_Previews: PreviewProvider {","    static var previews: some View {","        PresenterView()","    }","}"],"fileName":"Presenter.swift","identifier":"Presenter4.swift","type":"file","fileType":"swift","highlights":[{"line":8},{"line":9},{"line":10},{"line":11}]},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/List-View#Dependency-injection":{"role":"pseudoSymbol","title":"Dependency injection","abstract":[{"type":"text","text":"Create the list view of all the Lean Coffee Events and learn about Dependency Injection with SwiftUI."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/List-View#Dependency-injection","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/list-view#Dependency-injection"},"doc://LeanCoffeeApp/tutorials/Tutorial-Table-of-Contents/Lists-and-Dependencies":{"role":"article","title":"Lists and Dependencies","abstract":[],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/Lists-and-Dependencies","kind":"article","type":"topic","url":"\/tutorials\/tutorial-table-of-contents\/lists-and-dependencies"},"Presenter9.swift":{"syntax":"swift","content":["import SwiftUI","","@MainActor class Presenter: ObservableObject {","    var error: Error?","    @Published var didError = false","    @Published var isLoading = false","    @Published var didFinish = false","    ","    internal func perform(_ task: () async throws -> Void) async {","        isLoading = true","        do {","            try await task()","        } catch {","            self.error = error","            didError = true","        }","        isLoading = false","    }","}","","class MockPresenter: Presenter {","    func load() {","        Task {","            await perform {","                try await Task.sleep(nanoseconds: 2_000_000_000)","                didFinish = true","            }","        }","    }","    ","    func `throw`() {","        Task {","            await perform {","                throw NSError(domain: \"This is a test\", code: 1)","            }","        }","    }","}","","struct PresenterView: View {","    @ObservedObject var presenter = MockPresenter()","    ","    var body: some View {","        VStack {","            Text(\"Presenter View\")","            Spacer()","            BoldButton(presenter.isLoading ? \"Loading ðŸ˜µâ€ðŸ’«\" : \"Present a new view\", backgroundColor: .purple, action: { presenter.load() })","            BoldButton(\"Throw an Error\", action: { presenter.throw() })","        }","        .sheet(isPresented: $presenter.didFinish, content: { Text(\"It worked!\") })","        .alert(\"There was an error!\", isPresented: $presenter.didError, actions: {})","    }","}","","struct PresenterView_Previews: PreviewProvider {","    static var previews: some View {","        PresenterView()","    }","}"],"fileName":"Presenter.swift","identifier":"Presenter9.swift","type":"file","fileType":"swift","highlights":[{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36},{"line":37},{"line":47},{"line":48},{"line":51}]},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/Loading-and-Errors#A-Loading-View":{"role":"pseudoSymbol","title":"A Loading View","abstract":[{"type":"text","text":"Thereâ€™s nothing worse than an app that doesnâ€™t show loading states or errorsâ€¦"}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Loading-and-Errors#A-Loading-View","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/loading-and-errors#A-Loading-View"},"SignUpView4-1.swift":{"syntax":"swift","content":["import SwiftUI","","struct SignUpView: View {","    @ObservedObject var presenter = SignUpPresenter()","    ","    func signUp() {","        Task {","            do {","                guard password == passwordValidation else { return }","                try await HttpClient()","                    .post(","                        body: CreateUser(name: name, username: username, password: password),","                        url: rootURL + \"\/users\"","                    )","                ","                guard let token = \"\\(username):\\(password)\".data(using: .utf8) else {","                    return","                }","                ","                let header = [\"Authorization\" : \"Basic \" + token.base64EncodedString()]","        ","                self.accessToken = try await HttpClient()","                    .post(","                        decodeReponse: AccessToken.self,","                        url: rootURL + \"\/users\/login\",","                        withHeaders: header","                    ).value","                self.didFinish = true","            } catch(let error) {","                print(error)","            }","        }","    }","    ","    @ViewBuilder var form: some View {","        TextField(\"Name\", text: $name, prompt: Text(\"Name\"))","        TextField(\"Username\", text: $username, prompt: Text(\"Username\"))","        ","        SecureField(\"Password\", text: $password, prompt: Text(\"Password\"))","        ","        SecureField(\"Confirm Password\", text: $passwordValidation, prompt: Text(\"Confirm Password\"))","    }","    ","    var body: some View {","        VStack {","            Text(\"Sign Up!\").font(.title).fontWeight(.black)","            ","            Spacer()","            ","            form","            ","            Spacer()","            ","            BoldButton(\"Submit\", action: signUp)","        }","        .padding()","        .fullScreenCover(isPresented: $didFinish) {","            Text(\"Home View\")","        }","    }","}"],"fileName":"SignUpView.swift","identifier":"SignUpView4-1.swift","type":"file","fileType":"swift","highlights":[{"line":4}]},"Presenter3.swift":{"syntax":"swift","content":["import SwiftUI","","@MainActor class Presenter: ObservableObject {","    var error: Error?","    @Published var didError = false","    @Published var isLoading = false","    @Published var didFinish = false","}","","struct PresenterView: View {","    var body: some View {","        VStack {","            Text(\"Presenter View\")","            Spacer()","            BoldButton(\"Present a new view\", backgroundColor: .purple, action: {})","            BoldButton(\"Throw an Error\", action: {})","        }","    }","}","","struct PresenterView_Previews: PreviewProvider {","    static var previews: some View {","        PresenterView()","    }","}"],"fileName":"Presenter.swift","identifier":"Presenter3.swift","type":"file","fileType":"swift","highlights":[{"line":4},{"line":5},{"line":6},{"line":7}]},"doc://LeanCoffeeApp/tutorials/Tutorial-Table-of-Contents/Create-New-Events-and-Topics":{"role":"article","title":"Create New Events and Topics","abstract":[],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/Create-New-Events-and-Topics","kind":"article","type":"topic","url":"\/tutorials\/tutorial-table-of-contents\/create-new-events-and-topics"},"SignInPresenter2.swift":{"syntax":"swift","content":["import SwiftUI","","class SignInPresenter: Presenter {    ","    @Published var username = \"\"","    @Published var password = \"\"","    @Published var accessToken = \"\"","    ","    func submitForm() async {","        guard let token = \"\\(username):\\(password)\".data(using: .utf8) else {","            return","        }","        ","        let header = [\"Authorization\" : \"Basic \" + token.base64EncodedString()]","    }","}"],"fileName":"SignInPresenter.swift","identifier":"SignInPresenter2.swift","type":"file","fileType":"swift","highlights":[{"line":7},{"line":8},{"line":9},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14}]},"doc://LeanCoffeeApp/tutorials/Tutorial-Table-of-Contents/Authentication":{"role":"article","title":"Authentication","abstract":[],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/Authentication","kind":"article","type":"topic","url":"\/tutorials\/tutorial-table-of-contents\/authentication"},"Presenter6.swift":{"syntax":"swift","content":["import SwiftUI","","@MainActor class Presenter: ObservableObject {","    var error: Error?","    @Published var didError = false","    @Published var isLoading = false","    @Published var didFinish = false","    ","    internal func perform(_ task: () async throws -> Void) async {","        isLoading = true","        do {","            try await task()","        } catch {","            self.error = error","            didError = true","        }","        isLoading = false","    }","}","","class MockPresenter: Presenter {","    func load() {","        Task {","            await perform {","                try await Task.sleep(nanoseconds: 2_000_000_000)","            }","        }","    }","}","","struct PresenterView: View {","    var body: some View {","        VStack {","            Text(\"Presenter View\")","            Spacer()","            BoldButton(\"Present a new view\", backgroundColor: .purple, action: {})","            BoldButton(\"Throw an Error\", action: {})","        }","    }","}","","struct PresenterView_Previews: PreviewProvider {","    static var previews: some View {","        PresenterView()","    }","}"],"fileName":"Presenter.swift","identifier":"Presenter6.swift","type":"file","fileType":"swift","highlights":[{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30}]},"doc://LeanCoffeeApp/tutorials/Tutorial-Table-of-Contents/Loading-and-Errors":{"role":"article","title":"Loading and Errors","abstract":[],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/Loading-and-Errors","kind":"article","type":"topic","url":"\/tutorials\/tutorial-table-of-contents\/loading-and-errors"},"SignInView7-3.swift":{"syntax":"swift","content":["import SwiftUI","","struct SignInView: View {","    @State var username = \"\"","    @State var password = \"\"","    @State var accessToken = \"\"","    @State var didFinish = false","    ","    func signIn() {","        guard let token = \"\\(username):\\(password)\".data(using: .utf8) else {","            return","        }","        ","        let header = [\"Authorization\" : \"Basic \" + token.base64EncodedString()]","        Task {","            do {","                self.accessToken = try await HttpClient()","                    .post(","                        decodeReponse: AccessToken.self,","                        url: rootURL + \"\/users\/login\",","                        withHeaders: header","                    ).value","                self.didFinish = true","            } catch (let error) {","                print(error) \/\/ We'll handle this later","            }","        }","    }","    ","    var body: some View {","        VStack {","            Text(\"Sign In!\").font(.title).fontWeight(.black)","            ","            Spacer()","            ","            TextField(\"Username\", text: $username, prompt: Text(\"Username\"))","            ","            SecureField(\"Password\", text: $password, prompt: Text(\"Password\"))","            ","            Spacer()","            ","            BoldButton(\"Submit\", action: signIn)","        }","        .padding()","        .fullScreenCover(isPresented: $didFinish) {","            Text(\"Home view\")","        }","    }","}","","struct AccessToken: Codable {","    let value: String","}"],"fileName":"SignInView.swift","identifier":"SignInView7-3.swift","type":"file","fileType":"swift","highlights":[]},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/Sign-in-and-Sign-up":{"role":"project","title":"Sign in and Sign up","estimatedTime":"20min","abstract":[{"type":"text","text":"Use the view from Chapter 1 to present a Sign in or Sign up form and log a user into the application."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Sign-in-and-Sign-up","kind":"project","type":"topic","url":"\/tutorials\/leancoffeeapp\/sign-in-and-sign-up"},"doc://LeanCoffeeApp/tutorials/Tutorial-Table-of-Contents/In-the-Topics":{"role":"article","title":"In the Topics","abstract":[],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/In-the-Topics","kind":"article","type":"topic","url":"\/tutorials\/tutorial-table-of-contents\/in-the-topics"},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/New-Lean-Coffee-Events-and-Topics#Creating-a-Topic":{"role":"pseudoSymbol","title":"Creating a Topic","abstract":[{"type":"text","text":"In this chapter weâ€™ll finish implementing the applicationâ€™s core functionality by allowing the user to create Lean Coffee events and their topics."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/New-Lean-Coffee-Events-and-Topics#Creating-a-Topic","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/new-lean-coffee-events-and-topics#Creating-a-Topic"},"SignUpView4-3.swift":{"syntax":"swift","content":["import SwiftUI","","struct SignUpView: View {","    @ObservedObject var presenter = SignUpPresenter()","    ","    func signUp() {","        Task {","            await presenter.submitForm()","        }","    }","    ","    @ViewBuilder var form: some View {","        TextField(\"Name\", text: $presenter.name, prompt: Text(\"Name\"))","        TextField(\"Username\", text: $presenter.username, prompt: Text(\"Username\"))","        ","        SecureField(\"Password\", text: $presenter.password, prompt: Text(\"Password\"))","        ","        SecureField(\"Confirm Password\", text: $presenter.passwordValidation, prompt: Text(\"Confirm Password\"))","    }","    ","    var body: some View {","        VStack {","            Text(\"Sign Up!\").font(.title).fontWeight(.black)","            ","            Spacer()","            ","            form","            ","            Spacer()","            ","            BoldButton(\"Submit\", action: signUp)","        }","        .padding()","        .fullScreenCover(isPresented: $presenter.didFinish) {","            Text(\"Home View\")","        }","    }","}"],"fileName":"SignUpView.swift","identifier":"SignUpView4-3.swift","type":"file","fileType":"swift","highlights":[{"line":13},{"line":14},{"line":16},{"line":18},{"line":34}]},"presenterview2.png":{"alt":"A view","type":"image","identifier":"presenterview2.png","variants":[{"url":"\/images\/presenterview2.png","traits":["1x","light"]}]},"SignInPresenter3.swift":{"syntax":"swift","content":["import SwiftUI","","class SignInPresenter: Presenter {    ","    @Published var username = \"\"","    @Published var password = \"\"","    @Published var accessToken = \"\"","    ","    func submitForm() async {","        guard let token = \"\\(username):\\(password)\".data(using: .utf8) else {","            return","        }","        ","        let header = [\"Authorization\" : \"Basic \" + token.base64EncodedString()]","        ","        await perform {","            self.accessToken = try await HttpClient()","                .post(","                    decodeReponse: AccessToken.self,","                    url: rootURL + \"\/users\/login\",","                    withHeaders: header","                ).value","        }","    }","}"],"fileName":"SignInPresenter.swift","identifier":"SignInPresenter3.swift","type":"file","fileType":"swift","highlights":[{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22}]},"Presenter7.swift":{"syntax":"swift","content":["import SwiftUI","","@MainActor class Presenter: ObservableObject {","    var error: Error?","    @Published var didError = false","    @Published var isLoading = false","    @Published var didFinish = false","    ","    internal func perform(_ task: () async throws -> Void) async {","        isLoading = true","        do {","            try await task()","        } catch {","            self.error = error","            didError = true","        }","        isLoading = false","    }","}","","class MockPresenter: Presenter {","    func load() {","        Task {","            await perform {","                try await Task.sleep(nanoseconds: 2_000_000_000)","            }","        }","    }","}","","struct PresenterView: View {","    @ObservedObject var presenter = MockPresenter()","    ","    var body: some View {","        VStack {","            Text(\"Presenter View\")","            Spacer()","            BoldButton(presenter.isLoading ? \"Loading ðŸ˜µâ€ðŸ’«\" : \"Present a new view\", backgroundColor: .purple, action: {","                presenter.load()","            })","            BoldButton(\"Throw an Error\", action: {})","        }","    }","}","","struct PresenterView_Previews: PreviewProvider {","    static var previews: some View {","        PresenterView()","    }","}"],"fileName":"Presenter.swift","identifier":"Presenter7.swift","type":"file","fileType":"swift","highlights":[{"line":32},{"line":33},{"line":38},{"line":39},{"line":40}]},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/Lean-Coffee-Topics":{"role":"project","title":"The Lean Coffee View","estimatedTime":"1hr 0min","abstract":[{"type":"text","text":"Learn how to crate custom list rows with swipe actions, sorting, and more."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Lean-Coffee-Topics","kind":"project","type":"topic","url":"\/tutorials\/leancoffeeapp\/lean-coffee-topics"},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/New-Lean-Coffee-Events-and-Topics#You-did-it!-%F0%9F%94%A5%E2%98%9D%EF%B8%8F":{"role":"pseudoSymbol","title":"You did it! ðŸ”¥â˜ï¸","abstract":[{"type":"text","text":"In this chapter weâ€™ll finish implementing the applicationâ€™s core functionality by allowing the user to create Lean Coffee events and their topics."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/New-Lean-Coffee-Events-and-Topics#You-did-it!-%F0%9F%94%A5%E2%98%9D%EF%B8%8F","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/new-lean-coffee-events-and-topics#You-did-it!-%25F0%259F%2594%25A5%25E2%2598%259D%25EF%25B8%258F"},"Presenter2.swift":{"syntax":"swift","content":["import SwiftUI","","@MainActor class Presenter: ObservableObject {","    ","}","","struct PresenterView: View {","    var body: some View {","        VStack {","            Text(\"Presenter View\")","            Spacer()","            BoldButton(\"Present a new view\", backgroundColor: .purple, action: {})","            BoldButton(\"Throw an Error\", action: {})","        }","    }","}","","struct PresenterView_Previews: PreviewProvider {","    static var previews: some View {","        PresenterView()","    }","}"],"fileName":"Presenter.swift","identifier":"Presenter2.swift","type":"file","fileType":"swift","highlights":[{"line":3},{"line":4},{"line":5},{"line":6}]},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/Presenter#A-basic-Presenter":{"role":"pseudoSymbol","title":"A basic Presenter","abstract":[{"type":"text","text":"In this chapter weâ€™ll refactor the Sign in and Sign up views to use the Presenter pattern. This will allow us to reuse some of the code, and pull the business logic out of the view."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Presenter#A-basic-Presenter","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/presenter#A-basic-Presenter"},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/Loading-and-Errors":{"role":"project","title":"Loading and Errors","estimatedTime":"25min","abstract":[{"type":"text","text":"Thereâ€™s nothing worse than an app that doesnâ€™t show loading states or errorsâ€¦"}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Loading-and-Errors","kind":"project","type":"topic","url":"\/tutorials\/leancoffeeapp\/loading-and-errors"},"SignUpPresenter4.swift":{"syntax":"swift","content":["import SwiftUI","","class SignUpPresenter: SignInPresenter {","    @Published var name = \"\"","    @Published var passwordValidation = \"\"","    ","    func formValidated() -> Bool {","        name.count > 0 && username.count > 0 && password.count > 0 && password == passwordValidation","    }","    ","    override func submitForm() async {","        await perform {","            try await HttpClient()","                .post(","                    body: CreateUser(name: self.name, username: self.username, password: self.password),","                    url: rootURL + \"\/users\"","                )","            \/\/ after sign up, call the Sign in Presenter's form submission funtion get an auth token","            try await super.submitForm()","        }","    }","}"],"fileName":"SignUpPresenter.swift","identifier":"SignUpPresenter4.swift","type":"file","fileType":"swift","highlights":[{"line":18},{"line":19}]},"SignUpView4-2.swift":{"syntax":"swift","content":["import SwiftUI","","struct SignUpView: View {","    @ObservedObject var presenter = SignUpPresenter()","    ","    func signUp() {","        Task {","            await presenter.submitForm()","        }","    }","    ","    @ViewBuilder var form: some View {","        TextField(\"Name\", text: $name, prompt: Text(\"Name\"))","        TextField(\"Username\", text: $username, prompt: Text(\"Username\"))","        ","        SecureField(\"Password\", text: $password, prompt: Text(\"Password\"))","        ","        SecureField(\"Confirm Password\", text: $passwordValidation, prompt: Text(\"Confirm Password\"))","    }","    ","    var body: some View {","        VStack {","            Text(\"Sign Up!\").font(.title).fontWeight(.black)","            ","            Spacer()","            ","            form","            ","            Spacer()","            ","            BoldButton(\"Submit\", action: signUp)","        }","        .padding()","        .fullScreenCover(isPresented: $didFinish) {","            Text(\"Home View\")","        }","    }","}"],"fileName":"SignUpView.swift","identifier":"SignUpView4-2.swift","type":"file","fileType":"swift","highlights":[{"line":8}]},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/Presenter#The-Sign-In-Presenter":{"role":"pseudoSymbol","title":"The Sign In Presenter","abstract":[{"type":"text","text":"In this chapter weâ€™ll refactor the Sign in and Sign up views to use the Presenter pattern. This will allow us to reuse some of the code, and pull the business logic out of the view."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Presenter#The-Sign-In-Presenter","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/presenter#The-Sign-In-Presenter"},"SignUpPresenter1.swift":{"syntax":"swift","content":["import SwiftUI","","class SignUpPresenter: SignInPresenter {","    @Published var name = \"\"","    @Published var passwordValidation = \"\"","}",""],"fileName":"SignUpPresenter.swift","identifier":"SignUpPresenter1.swift","type":"file","fileType":"swift","highlights":[]},"https://developer.apple.com/documentation/combine":{"title":"Appleâ€™s documentation","titleInlineContent":[{"type":"text","text":"Appleâ€™s documentation"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/combine","url":"https:\/\/developer.apple.com\/documentation\/combine"},"https://www.baeldung.com/mvc-vs-mvp-pattern":{"title":"this article","titleInlineContent":[{"type":"text","text":"this article"}],"type":"link","identifier":"https:\/\/www.baeldung.com\/mvc-vs-mvp-pattern","url":"https:\/\/www.baeldung.com\/mvc-vs-mvp-pattern"},"SignUpPresenter3.swift":{"syntax":"swift","content":["import SwiftUI","","class SignUpPresenter: SignInPresenter {","    @Published var name = \"\"","    @Published var passwordValidation = \"\"","    ","    func formValidated() -> Bool {","        name.count > 0 && username.count > 0 && password.count > 0 && password == passwordValidation","    }","    ","    override func submitForm() async {","        await perform {","            try await HttpClient()","                .post(","                    body: CreateUser(name: self.name, username: self.username, password: self.password),","                    url: rootURL + \"\/users\"","                )","        }","    }","}"],"fileName":"SignUpPresenter.swift","identifier":"SignUpPresenter3.swift","type":"file","fileType":"swift","highlights":[{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19}]},"doc://LeanCoffeeApp/tutorials/Tutorial-Table-of-Contents/Getting-started-with-SwiftUI":{"role":"article","title":"Getting started with SwiftUI","abstract":[],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents\/Getting-started-with-SwiftUI","kind":"article","type":"topic","url":"\/tutorials\/tutorial-table-of-contents\/getting-started-with-swiftui"},"presenterview1.png":{"alt":"A view","type":"image","identifier":"presenterview1.png","variants":[{"url":"\/images\/presenterview1.png","traits":["1x","light"]}]},"Presenter.swift":{"syntax":"swift","content":["import SwiftUI","","struct PresenterView: View {","    var body: some View {","        Text(\"Presenter View\")","    }","}","","struct PresenterView_Previews: PreviewProvider {","    static var previews: some View {","        PresenterView()","    }","}"],"fileName":"Presenter.swift","identifier":"Presenter.swift","type":"file","fileType":"swift","highlights":[]},"SignInPresenter1.swift":{"syntax":"swift","content":["import SwiftUI","","class SignInPresenter: Presenter {    ","    @Published var username = \"\"","    @Published var password = \"\"","    @Published var accessToken = \"\"","","}"],"fileName":"SignInPresenter.swift","identifier":"SignInPresenter1.swift","type":"file","fileType":"swift","highlights":[]},"swift.png":{"alt":"swift logo","type":"image","identifier":"swift.png","variants":[{"url":"\/images\/swift.png","traits":["1x","light"]}]},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/Lean-Coffee-Topics#Creating-the-Lean-Coffee-Presenter":{"role":"pseudoSymbol","title":"Creating the Lean Coffee Presenter","abstract":[{"type":"text","text":"Learn how to crate custom list rows with swipe actions, sorting, and more."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Lean-Coffee-Topics#Creating-the-Lean-Coffee-Presenter","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/lean-coffee-topics#Creating-the-Lean-Coffee-Presenter"},"doc://LeanCoffeeApp/tutorials/Tutorial-Table-of-Contents":{"role":"overview","title":"Lean Coffee","abstract":[{"type":"text","text":"Create a Lean Coffee app for iOS! Create lean coffee events, topics, and votes without the pens or sticky notes!"}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/Tutorial-Table-of-Contents","kind":"overview","type":"topic","url":"\/tutorials\/tutorial-table-of-contents"},"SignInView8-1.swift":{"syntax":"swift","content":["import SwiftUI","","struct SignInView: View {","    @ObservedObject var presenter = SignInPresenter()","","    func signIn() {","        guard let token = \"\\(username):\\(password)\".data(using: .utf8) else {","            return","        }","        ","        let header = [\"Authorization\" : \"Basic \" + token.base64EncodedString()]","        Task {","            do {","                self.accessToken = try await HttpClient()","                    .post(","                        decodeReponse: AccessToken.self,","                        url: rootURL + \"\/users\/login\",","                        withHeaders: header","                    ).value","                self.didFinish = true","            } catch (let error) {","                print(error) \/\/ We'll handle this later","            }","        }","    }","    ","    var body: some View {","        VStack {","            Text(\"Sign In!\").font(.title).fontWeight(.black)","            ","            Spacer()","            ","            TextField(\"Username\", text: $username, prompt: Text(\"Username\"))","            ","            SecureField(\"Password\", text: $password, prompt: Text(\"Password\"))","            ","            Spacer()","            ","            BoldButton(\"Submit\", action: signIn)","        }","        .padding()","        .fullScreenCover(isPresented: $didFinish) {","            Text(\"Home view\")","        }","    }","}","","struct AccessToken: Codable {","    let value: String","} \/\/ Best practice, put this in its own file ðŸ‘"],"fileName":"SignInView.swift","identifier":"SignInView8-1.swift","type":"file","fileType":"swift","highlights":[{"line":4},{"line":5},{"line":50}]},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/List-View#A-laundry-list-of-things-to-do.":{"role":"pseudoSymbol","title":"A laundry list of things to do.","abstract":[{"type":"text","text":"Create the list view of all the Lean Coffee Events and learn about Dependency Injection with SwiftUI."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/List-View#A-laundry-list-of-things-to-do.","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/list-view#A-laundry-list-of-things-to-do."},"SignUpView3-4-signin.swift":{"syntax":"swift","content":["import SwiftUI","","struct SignUpView: View {","    @State var name = \"\"","    @State var username = \"\"","    @State var password = \"\"","    @State var passwordValidation = \"\"","    @State var didFinish = false","    @State var accessToken = \"\"","    ","    func signUp() {","        Task {","            do {","                guard password == passwordValidation else { return }","                try await HttpClient()","                    .post(","                        body: CreateUser(name: name, username: username, password: password),","                        url: rootURL + \"\/users\"","                    )","                ","                guard let token = \"\\(username):\\(password)\".data(using: .utf8) else {","                    return","                }","                ","                let header = [\"Authorization\" : \"Basic \" + token.base64EncodedString()]","        ","                self.accessToken = try await HttpClient()","                    .post(","                        decodeReponse: AccessToken.self,","                        url: rootURL + \"\/users\/login\",","                        withHeaders: header","                    ).value","                self.didFinish = true","            } catch(let error) {","                print(error)","            }","        }","    }","    ","    @ViewBuilder var form: some View {","        TextField(\"Name\", text: $name, prompt: Text(\"Name\"))","        TextField(\"Username\", text: $username, prompt: Text(\"Username\"))","        ","        SecureField(\"Password\", text: $password, prompt: Text(\"Password\"))","        ","        SecureField(\"Confirm Password\", text: $passwordValidation, prompt: Text(\"Confirm Password\"))","    }","    ","    var body: some View {","        VStack {","            Text(\"Sign Up!\").font(.title).fontWeight(.black)","            ","            Spacer()","            ","            form","            ","            Spacer()","            ","            BoldButton(\"Submit\", action: signUp)","        }","        .padding()","        .fullScreenCover(isPresented: $didFinish) {","            Text(\"Home View\")","        }","    }","}"],"fileName":"SignUpView.swift","identifier":"SignUpView3-4-signin.swift","type":"file","fileType":"swift","highlights":[]},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/Loading-and-Errors#The-AsyncView":{"role":"pseudoSymbol","title":"The AsyncView","abstract":[{"type":"text","text":"Thereâ€™s nothing worse than an app that doesnâ€™t show loading states or errorsâ€¦"}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Loading-and-Errors#The-AsyncView","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/loading-and-errors#The-AsyncView"},"SignUpPresenter2.swift":{"syntax":"swift","content":["import SwiftUI","","class SignUpPresenter: SignInPresenter {","    @Published var name = \"\"","    @Published var passwordValidation = \"\"","    ","    func formValidated() -> Bool {","        name.count > 0 && username.count > 0 && password.count > 0 && password == passwordValidation","    }","}"],"fileName":"SignUpPresenter.swift","identifier":"SignUpPresenter2.swift","type":"file","fileType":"swift","highlights":[{"line":6},{"line":7},{"line":8},{"line":9}]},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/Getting-Started#Your-first-SwiftUI-View":{"role":"pseudoSymbol","title":"Your first SwiftUI View","abstract":[{"type":"text","text":"Create the landing page of the Lean Coffee application supporting iPhone, iPad, and darkmode."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Getting-Started#Your-first-SwiftUI-View","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/getting-started#Your-first-SwiftUI-View"},"presenterview3.png":{"alt":"A view","type":"image","identifier":"presenterview3.png","variants":[{"url":"\/images\/presenterview3.png","traits":["1x","light"]}]},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/Lean-Coffee-Topics#Creating-the-Lean-Coffee-View":{"role":"pseudoSymbol","title":"Creating the Lean Coffee View","abstract":[{"type":"text","text":"Learn how to crate custom list rows with swipe actions, sorting, and more."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Lean-Coffee-Topics#Creating-the-Lean-Coffee-View","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/lean-coffee-topics#Creating-the-Lean-Coffee-View"},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/Getting-Started":{"role":"project","title":"Your first SwiftUI View","estimatedTime":"15min","abstract":[{"type":"text","text":"Create the landing page of the Lean Coffee application supporting iPhone, iPad, and darkmode."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Getting-Started","kind":"project","type":"topic","url":"\/tutorials\/leancoffeeapp\/getting-started"},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/List-View":{"role":"project","title":"Create the List View and understand Swift's flavor of Dependency Injection","estimatedTime":"35min","abstract":[{"type":"text","text":"Create the list view of all the Lean Coffee Events and learn about Dependency Injection with SwiftUI."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/List-View","kind":"project","type":"topic","url":"\/tutorials\/leancoffeeapp\/list-view"},"SignInView8-2.swift":{"syntax":"swift","content":["import SwiftUI","","struct SignInView: View {","    @ObservedObject var presenter = SignInPresenter()","","    func signIn() {","        Task {","            await presenter.submitForm()","        }","    }","    ","    var body: some View {","        VStack {","            Text(\"Sign In!\").font(.title).fontWeight(.black)","            ","            Spacer()","            ","            TextField(\"Username\", text: $username, prompt: Text(\"Username\"))","            ","            SecureField(\"Password\", text: $password, prompt: Text(\"Password\"))","            ","            Spacer()","            ","            BoldButton(\"Submit\", action: signIn)","        }","        .padding()","        .fullScreenCover(isPresented: $didFinish) {","            Text(\"Home view\")","        }","    }","}","","struct AccessToken: Codable {","    let value: String","} \/\/ Best practice, put this in its own file ðŸ‘"],"fileName":"SignInView.swift","identifier":"SignInView8-2.swift","type":"file","fileType":"swift","highlights":[{"line":8}]},"Presenter5.swift":{"syntax":"swift","content":["import SwiftUI","","@MainActor class Presenter: ObservableObject {","    var error: Error?","    @Published var didError = false","    @Published var isLoading = false","    @Published var didFinish = false","    ","    internal func perform(_ task: () async throws -> Void) async {","        isLoading = true","        do {","            try await task()","        } catch {","            self.error = error","            didError = true","        }","        isLoading = false","    }","}","","struct PresenterView: View {","    var body: some View {","        VStack {","            Text(\"Presenter View\")","            Spacer()","            BoldButton(\"Present a new view\", backgroundColor: .purple, action: {})","            BoldButton(\"Throw an Error\", action: {})","        }","    }","}","","struct PresenterView_Previews: PreviewProvider {","    static var previews: some View {","        PresenterView()","    }","}"],"fileName":"Presenter.swift","identifier":"Presenter5.swift","type":"file","fileType":"swift","highlights":[{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17}]},"SignInView8-3.swift":{"syntax":"swift","content":["import SwiftUI","","struct SignInView: View {","    @ObservedObject var presenter = SignInPresenter()","","    func signIn() {","        Task {","            await presenter.submitForm()","        }","    }","    ","    var body: some View {","        VStack {","            Text(\"Sign In!\").font(.title).fontWeight(.black)","            ","            Spacer()","            ","            TextField(\"Username\", text: $presenter.username, prompt: Text(\"Username\"))","            ","            SecureField(\"Password\", text: $presenter.password, prompt: Text(\"Password\"))","            ","            Spacer()","            ","            BoldButton(\"Submit\", action: signIn)","        }","        .padding()","        .fullScreenCover(isPresented: $presenter.didFinish) {","            Text(\"Home view\")","        }","    }","}","","struct AccessToken: Codable {","    let value: String","} \/\/ Best practice, put this in its own file ðŸ‘"],"fileName":"SignInView.swift","identifier":"SignInView8-3.swift","type":"file","fileType":"swift","highlights":[{"line":18},{"line":20},{"line":27}]},"presenterview.png":{"alt":"A view","type":"image","identifier":"presenterview.png","variants":[{"url":"\/images\/presenterview.png","traits":["1x","light"]}]},"https://www.swiftbysundell.com/articles/the-main-actor-attribute/":{"title":"SwiftBySundell article","titleInlineContent":[{"type":"text","text":"SwiftBySundell article"}],"type":"link","identifier":"https:\/\/www.swiftbysundell.com\/articles\/the-main-actor-attribute\/","url":"https:\/\/www.swiftbysundell.com\/articles\/the-main-actor-attribute\/"},"presenterview4.png":{"alt":"A view","type":"image","identifier":"presenterview4.png","variants":[{"url":"\/images\/presenterview4.png","traits":["1x","light"]}]},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/Presenter":{"role":"project","title":"The Presenter Pattern","estimatedTime":"35min","abstract":[{"type":"text","text":"In this chapter weâ€™ll refactor the Sign in and Sign up views to use the Presenter pattern. This will allow us to reuse some of the code, and pull the business logic out of the view."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Presenter","kind":"project","type":"topic","url":"\/tutorials\/leancoffeeapp\/presenter"},"Presenter1.swift":{"syntax":"swift","content":["import SwiftUI","","struct PresenterView: View {","    var body: some View {","        VStack {","            Text(\"Presenter View\")","            Spacer()","            BoldButton(\"Present a new view\", backgroundColor: .purple, action: {})","            BoldButton(\"Throw an Error\", action: {})","        }","    }","}","","struct PresenterView_Previews: PreviewProvider {","    static var previews: some View {","        PresenterView()","    }","}"],"fileName":"Presenter.swift","identifier":"Presenter1.swift","type":"file","fileType":"swift","highlights":[{"line":5},{"line":6},{"line":7},{"line":8},{"line":9},{"line":10}]},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/New-Lean-Coffee-Events-and-Topics#Creating-a-Lean-Coffee":{"role":"pseudoSymbol","title":"Creating a Lean Coffee","abstract":[{"type":"text","text":"In this chapter weâ€™ll finish implementing the applicationâ€™s core functionality by allowing the user to create Lean Coffee events and their topics."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/New-Lean-Coffee-Events-and-Topics#Creating-a-Lean-Coffee","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/new-lean-coffee-events-and-topics#Creating-a-Lean-Coffee"},"coffee-beans.png":{"alt":"Coffee Beans","type":"image","identifier":"coffee-beans.png","variants":[{"url":"\/images\/coffee-beans.png","traits":["1x","light"]}]},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/Sign-in-and-Sign-up#Creating-the-Sign-Up-View":{"role":"pseudoSymbol","title":"Creating the Sign Up View","abstract":[{"type":"text","text":"Use the view from Chapter 1 to present a Sign in or Sign up form and log a user into the application."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/Sign-in-and-Sign-up#Creating-the-Sign-Up-View","kind":"section","type":"section","url":"\/tutorials\/leancoffeeapp\/sign-in-and-sign-up#Creating-the-Sign-Up-View"},"doc://LeanCoffeeApp/tutorials/LeanCoffeeApp/New-Lean-Coffee-Events-and-Topics":{"role":"project","title":"Let there be Coffee","estimatedTime":"45min","abstract":[{"type":"text","text":"In this chapter weâ€™ll finish implementing the applicationâ€™s core functionality by allowing the user to create Lean Coffee events and their topics."}],"identifier":"doc:\/\/LeanCoffeeApp\/tutorials\/LeanCoffeeApp\/New-Lean-Coffee-Events-and-Topics","kind":"project","type":"topic","url":"\/tutorials\/leancoffeeapp\/new-lean-coffee-events-and-topics"}}}